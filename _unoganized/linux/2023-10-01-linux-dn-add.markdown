---
layout: post
current: post
cover:  assets/built/images/oracle_linux.png
navigation: True
title: DN(Domain Name) 추가 하기
date: 2023-11-14 00:00:00 +0900
tags: [linux]
class: post-template
subclass: 'post tag-linux'
author: joeyeongjune
---

## Depolying Linux DNS Server

### 1. `/etc/named.rfc1912.zones`



```
$ sudo vim /etc/named.rfc1912.zones

・・・
zone "oracle8.zabbix" IN {
        type master;
        file "oracle8.local.zone";
        allow-update { none; };
};
```

### 2. zone file record modification

```
$ sudo vim /var/named/tickle.com.zone

$TTL 1D
@       IN SOA  oracle8.local. root.(
                          0       ; serial
                          1D      ; refresh
                          1H      ; retry
                          1W      ; expire
                          3H )    ; minimum
        IN NS   oracle8.local.
        IN A    192.168.0.200

; Defines sub domains
zabbix     IN CNAME  @
```

### 7. zone file settings and zone file validation check

```
$ sudo named-checkconf /etc/named.rfc1912.zones
  If there is no output, there is no problem

$ sudo named-checkzone tickle.com /var/named/tickle.com.zone
  zone tickle.com/IN: loaded serial 0
  OK
```

### 8. /etc/resolv.conf DNS 127.0.0.1 registration

```
$ sudo ls -l /etc/resolv.conf
  -rw-r--r--. 1 root root 82 Oct 16 16:50 /etc/resolv.conf
$ sudo cp -p /etc/resolv.conf /etc/resolv.conf.back
$ sudo vim /etc/resolv.conf
  # Generated by NetworkManager
  nameserver 127.0.0.1
  nameserver 58.159.201.244
  nameserver 61.122.116.174
```

![image](https://github.com/joeyeongjune/joeyeongjune.github.io/assets/42788315/60ab6398-fa6b-4e21-ad0a-56bd8925670c)

```
$ nmcli device
  DEVICE   TYPE      STATE      CONNECTION
  enp0s25  ethernet  connected  enp0s25
  lo       loopback  unmanaged  --
  wlo1     wifi      unmanaged  --

$ sudo nmcli con up enp0s25
  Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/2)
```

### 9. Named service restart and service auto-excution registration

```
$ sudo systemctl restart named
$ sudo systemctl enable named
  Created symlink /etc/systemd/system/multi-user.target.wants/named.service → /usr/lib/systemd/system/named.service.
```

### 10. Verify Registered Domain and IP

```
$ nslookup
  > tickle.com
  Server:         127.0.0.1
  Address:        127.0.0.1#53

  Name:   tickle.com
  Address: 192.168.0.200
```

### Issues

- [resolv.conf 초기화 현상](https://it-serial.tistory.com/entry/%EB%A6%AC%EB%88%85%EC%8A%A4-DNS-%EC%84%A4%EC%A0%95-%EB%B2%88%EC%99%B8%ED%8E%B8-resolvconf-%ED%8C%8C%EC%9D%BC%EC%B4%88%EA%B8%B0%ED%99%94-%ED%98%84%EC%83%81-%EC%84%A4%EB%AA%85)