---
title: '[LinuC-1 102] 11.セキュリティ' 
categories:
    - Linux

tag:
    - Linux
    - LinuC-1 102

author_profile: true    #작성자 프로필 출력 여부

last_modified_at: 2021-11-18T19:00:00+09:00

toc: true   #Table Of Contents 목차 

toc_sticky: true
---

### セキュリティを高める

* 外部からの侵入に対するセキュリティを高める
  - 必要なソフトウェアのみをインストールし、不要なサービスを起動しない
  - ホストレベルのアクセス制御を行う
  - パケットフィルタリングによりアクセス制御を行う
  - セキュリティ情報の確認を頻繁に行い、必要があれば素早く対策を実施する

* 内部からの侵入に対するセキュリティを高める
  - 適切なユーザパスワード管理を行う
  - rootユーザ権限で動作するプログラムを最小限にし、定期的にチックを行う


### SUID / SGID

一般ユーザがプログラムを実行しても、SUIDが設定されたファイル（プログラム）はroot権限で、
SGIDは設定したグループ
 設定されたプログラム及びファイルは一般ユーザが実行してもroot権限で動作する

  - SUIDが設定されたモードを文字表現で表すと「u+s」、数字表現では「4000」
  - 「-uid」で所有権を、「-gid」は所有権を持つグループを検査できる
  - rootユーザは、ユーザIDもグループIDも「0」
  - `SGID`のモードは「g+s」と「2000」

 `find`コマンドを使って「/」からSUIDが設定されているファイルを検査する例
 ```bash
 # find / -perm -u+s -ls
 # find / -perm -4000 -ls
 # find / -perm -u+s -uid 0
 ```

 ##### GPN（GNU General Public License）
-----
GNUプロジェクトの創始者リチャード・ストールマンによって作られたライセンス。  
GPLを採用したオリジナルを改良・改変したソフトウェアにもGPLの適用が必要。  
ソースコードは公開しないといけないし、GPLを使ったソフトも同じくソースコードの  
公開が必要。「GPLv2」と「GPLv3」の2つのバージョンがある。大きな違いは、GPLv3の場合、  
利用者に利用特許を与えなければならない点。つまり、**利用者を特許侵害で訴えられない**こと。  

### lsof
 プロセスが開いているファイルを表示するコマンド
  * -i オプションを入れる事で開いているportの確認も可能
  * root ユーザで実行
  ![Image 2291](https://user-images.githubusercontent.com/42788315/152479288-6fe51609-fc8f-4b0a-bc07-a50bbe6b8660.png)


### fuser
 ローカルホストのリソースを使用しているプロセスを検索し、情報を表示
 検索したプロセスにシグナルを送るこごができる

 書式）fuser [オプション] 検査対象
 |オプション|説明|
 |:---|:---|
 |-k|プロセスにSIGKILLを送信（kill）<br> ※送りたいシグナルを指定する時は、-kではなく「-シグナル名」とする|
 |-m|マウントされたファイルシステムを指定（mount）|
 |-n|検査する領域(名前空間)を指定（namespace）<br> ※file（ファイル名:デフォルト）、udp（UDPポート番号）、tcp（TCPポート）が指定できる|
 |-u|検索結果にユーザ名を追加（user）|
 |-v|詳細に表示（verbose）|


 ### firewalld
 * CentOS 7 以降のディストリビューションでは`firewalld`が搭載されている
 * firewalld 裏側では`iptables`が動作する
 * `firewall-cmd`コマンドでfirewalld を操作
 * パケットフィルタリングのルールをまとめた`zone`という概念がある

 >主なfirewalldのzone（9種類）

 |zone|説明|
 |:--|:--|
 |public|公用領域での利用（デフォルト：公開サーバー用）|
 |work|業務での利用（社内LANにあるクライアントPC用）|
 |home|家庭での利用（家庭内LANにあるクライアントPC用）|
 |internal|ファイアウォールの内部ネットワーク側での利用|
 |external|ファイアウォールの外部ネットワーク側での利用|
 |dmz|ファイアウォールのDMZ|
 |block|受信パケットを拒否（外部への通信と戻りパケットだけを許可）|
 |drop|受信パケットを廃棄（外部への通信と戻りパケットだけを許可）|
 |trusted|全ての通信を許可|